<!DOCTYPE html>
<html lang="bn">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Teacher Panel | Rasel's ICT Hub</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script type="module">
            import { initializeApp, deleteApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
            import { getFirestore, collection, addDoc, getDocs, query, orderBy, updateDoc, deleteDoc, doc, onSnapshot, serverTimestamp, where, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

            const firebaseConfig = {
                  apiKey: "AIzaSyBKFKKfNmmf9lvLdARZzL4WfSqqYeyN5P0",
                  authDomain: "rasel-ict-hub-61ce0.firebaseapp.com",
                  projectId: "rasel-ict-hub-61ce0",
                  storageBucket: "rasel-ict-hub-61ce0.firebasestorage.app",
                  messagingSenderId: "914822238317",
                  appId: "1:914822238317:web:f4fc09d89ca8bfd932af64",
                  measurementId: "G-H50N54TXN8"
            };

            const app = initializeApp(firebaseConfig);
            const auth = getAuth();
            const db = getFirestore(app);

            let studentRecords = [];
            let allResources = [];
            let currentChatEmail = "";

            window.showNotify = (msg, type = 'success') => {
                  const toast = document.getElementById('ui-toast');
                  const toastMsg = document.getElementById('ui-toast-msg');
                  toastMsg.innerText = msg;
                  toast.className = `fixed top-10 right-10 z-[600] px-8 py-4 rounded-2xl shadow-2xl border-l-4 animate__animated animate__fadeInRight ${type === 'success' ? 'bg-emerald-900/90 border-emerald-500 text-emerald-200' : 'bg-red-900/90 border-red-500 text-red-200'}`;
                  toast.classList.remove('hidden');
                  setTimeout(() => { toast.classList.add('hidden'); }, 3000);
            };

            onAuthStateChanged(auth, (user) => {
                  if (user) {
                        document.getElementById('login-section').classList.add('hidden');
                        document.getElementById('admin-dashboard').classList.remove('hidden');
                        loadStudents();
                        loadMessages();
                        loadUploadedResources();
                        initPerformanceGraph();
                  } else {
                        document.getElementById('login-section').classList.remove('hidden');
                        document.getElementById('admin-dashboard').classList.add('hidden');
                  }
            });

            window.showSection = (sectionId) => {
                  const sections = ['home-panel', 'student-reg-panel', 'resource-panel', 'notice-panel', 'inquiry-panel', 'profile-panel'];
                  sections.forEach(id => document.getElementById(id).classList.add('hidden'));
                  document.getElementById(sectionId).classList.remove('hidden');
            };

            // --- Messenger System ---
            window.openChat = (email, name) => {
                  currentChatEmail = email;
                  document.getElementById('chat-target-name').innerText = name;
                  showSection('inquiry-panel');
                  loadChatHistory(email);
            };

            async function loadChatHistory(email) {
                  onSnapshot(query(collection(db, "messages"), orderBy("timestamp", "asc")), (snapshot) => {
                        const box = document.getElementById('chat-box');
                        box.innerHTML = "";
                        snapshot.forEach(docSnap => {
                              const m = docSnap.data();
                              if (m.studentEmail === email || m.recipientEmail === email) {
                                    const isMe = m.sender === 'teacher';
                                    box.innerHTML += `<div class="flex ${isMe ? 'justify-end' : 'justify-start'} mb-3"><div class="${isMe ? 'bg-sky-600' : 'bg-white/10'} p-3 rounded-2xl max-w-[80%] text-sm shadow-md"><p>${m.text}</p><span class="text-[8px] opacity-50 block mt-1">${m.timestamp?.toDate().toLocaleTimeString() || '...'}</span></div></div>`;
                              }
                        });
                        box.scrollTop = box.scrollHeight;
                  });
            }

            window.sendAdminMessage = async () => {
                  const text = document.getElementById('admin-msg-input').value;
                  if (!text || !currentChatEmail) return;
                  await addDoc(collection(db, "messages"), { text: text, recipientEmail: currentChatEmail, sender: 'teacher', timestamp: serverTimestamp() });
                  document.getElementById('admin-msg-input').value = "";
            };

            // --- Student Profile ---
            window.viewStudentProfile = async (email) => {
                  const q = query(collection(db, "students"), where("email", "==", email));
                  const snap = await getDocs(q);
                  if (!snap.empty) {
                        const data = snap.docs[0].data();
                        document.getElementById('p-name').innerText = data.name;
                        document.getElementById('p-roll').innerText = data.roll;
                        document.getElementById('p-college').innerText = data.college || 'N/A';
                        document.getElementById('p-phone').innerText = data.phone || 'N/A';
                        document.getElementById('p-email').innerText = data.email;
                        showSection('profile-panel');
                  }
            };

            // --- Broadcast & Live ---
            window.updateLiveLink = async () => {
                  const link = document.getElementById('liveLink').value;
                  const snap = await getDocs(collection(db, "live_session"));
                  const data = { url: link, active: true, timestamp: serverTimestamp() };
                  if (!snap.empty) await updateDoc(doc(db, "live_session", snap.docs[0].id), data);
                  else await addDoc(collection(db, "live_session"), data);
                  showNotify("Live Session Activated! üöÄ");
            };

            window.endLiveSession = async () => {
                  const snap = await getDocs(collection(db, "live_session"));
                  if (!snap.empty) { await deleteDoc(doc(db, "live_session", snap.docs[0].id)); showNotify("Session Ended üõ∞Ô∏è", "error"); }
            };

            // --- Resource Management & Open Library (Class Mode) ---
            async function loadUploadedResources() {
                  const q = query(collection(db, "resources"), orderBy("createdAt", "desc"));
                  onSnapshot(q, (snapshot) => {
                        allResources = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        filterResources();
                        renderTeacherCategorizedLibrary(); // ‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶≠‡¶ø‡¶â
                  });
            }

            window.filterResources = () => {
                  const val = document.getElementById('resSearch').value.toLowerCase();
                  const tableBody = document.getElementById('resource-list-body');
                  tableBody.innerHTML = "";
                  allResources.filter(r => r.title.toLowerCase().includes(val) || r.chapter.toLowerCase().includes(val))
                        .forEach((res) => {
                              tableBody.innerHTML += `
                        <tr class="border-b border-white/5 text-[11px] hover:bg-white/5 transition-all">
                              <td class="p-3 text-sky-400 font-bold uppercase tracking-widest">SEC: ${res.chapter}</td>
                              <td class="p-3 text-white font-medium">${res.title}</td>
                              <td class="p-3"><span class="bg-white/5 px-2 py-0.5 rounded text-[9px] border border-white/10 uppercase">${res.type}</span></td>
                              <td class="p-3 text-center"><button onclick="deleteResource('${res.id}')" class="text-red-500 font-black">DEL</button></td>
                        </tr>`;
                        });
            };

            // --- Task 2: Student-Style Categorized Navigation for Teacher ---
            function renderTeacherCategorizedLibrary() {
                  const container = document.getElementById('teacher-library-view');
                  if (!container) return;
                  container.innerHTML = "";

                  // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ï‡¶∞‡¶æ
                  const groups = allResources.reduce((acc, obj) => {
                        const key = obj.chapter;
                        if (!acc[key]) acc[key] = [];
                        acc[key].push(obj);
                        return acc;
                  }, {});

                  Object.keys(groups).sort().forEach(chapter => {
                        let chapterHtml = `
                        <div class="mb-6">
                              <h4 class="text-sky-500 font-black text-xs uppercase tracking-widest mb-3 border-b border-sky-500/20 pb-2">üìÇ Location: ${chapter === 'books-section' ? 'Reference Books' : 'Chapter ' + chapter}</h4>
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">`;

                        groups[chapter].forEach(res => {
                              chapterHtml += `
                              <div class="glass p-4 rounded-2xl border border-white/5 flex items-center justify-between group hover:border-sky-500/30 transition-all">
                                    <div class="flex items-center gap-3">
                                          <span class="text-xl">${res.type === 'PDF' ? 'üìö' : 'üìΩÔ∏è'}</span>
                                          <h5 class="text-[11px] font-bold text-white truncate max-w-[150px]">${res.title}</h5>
                                    </div>
                                    <a href="${res.link}" target="_blank" class="h-8 w-8 glass rounded-full flex items-center justify-center text-sky-500 hover:bg-sky-500 hover:text-white transition-all shadow-sm text-sm">üëÅÔ∏è</a>
                              </div>`;
                        });

                        chapterHtml += `</div></div>`;
                        container.innerHTML += chapterHtml;
                  });
            }

            window.uploadResource = async () => {
                  const ch = document.getElementById('resChapter').value;
                  const title = document.getElementById('resTitle').value;
                  const type = document.getElementById('resType').value;
                  const link = document.getElementById('resLink').value;
                  if (!title || !link) return showNotify("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®!", "error");
                  try {
                        await addDoc(collection(db, "resources"), { chapter: ch, title: title, type: type, link: link, createdAt: serverTimestamp() });
                        showNotify("‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∏‡¶´‡¶≤!");
                        document.getElementById('resTitle').value = ""; document.getElementById('resLink').value = "";
                  } catch (e) { showNotify(e.message, "error"); }
            };

            window.deleteResource = async (id) => { if (confirm("Delete file?")) await deleteDoc(doc(db, "resources", id)); };

            // --- Std Functions ---
            window.loginAdmin = async () => {
                  try { await signInWithEmailAndPassword(auth, document.getElementById('email').value, document.getElementById('pass').value); }
                  catch (e) { showNotify("Access Denied", "error"); }
            };
            window.logout = () => signOut(auth).then(() => location.reload());

            window.registerStudentAuth = async () => {
                  const sName = document.getElementById('sName').value;
                  const sRoll = document.getElementById('sRoll').value;
                  const sPhone = document.getElementById('sPhone').value;
                  const sCollege = document.getElementById('sCollege').value;
                  const sEmail = document.getElementById('sEmail').value;
                  const sPass = document.getElementById('sPass').value;
                  try {
                        const secondaryApp = initializeApp(firebaseConfig, "Secondary" + Date.now());
                        const secondaryAuth = getAuth(secondaryApp);
                        const userCredential = await createUserWithEmailAndPassword(secondaryAuth, sEmail, sPass);
                        await addDoc(collection(db, "students"), { uid: userCredential.user.uid, name: sName, roll: sRoll, phone: sPhone, college: sCollege, email: sEmail, createdAt: serverTimestamp() });
                        await signOut(secondaryAuth); await deleteApp(secondaryApp);
                        showNotify("Enrollment Successful! üöÄ");
                        loadStudents();
                  } catch (e) { showNotify(e.message, "error"); }
            };

            async function loadStudents() {
                  onSnapshot(query(collection(db, "students"), orderBy("createdAt", "desc")), (snap) => {
                        const tableBody = document.getElementById('student-table-body');
                        tableBody.innerHTML = "";
                        studentRecords = snap.docs.map(d => d.data());
                        snap.forEach((docSnap) => {
                              const data = docSnap.data();
                              tableBody.innerHTML += `
                              <tr class="border-b border-white/5 text-[11px] hover:bg-white/5 transition-all">
                                    <td onclick="viewStudentProfile('${data.email}')" class="p-4 font-bold text-sky-400 cursor-pointer underline">${data.name}</td>
                                    <td class="p-4 text-gray-400">${data.roll}</td>
                                    <td class="p-4 text-gray-400">${data.email}</td>
                                    <td class="p-4 text-gray-400">${data.college || 'N/A'}</td>
                                    <td class="p-4 flex gap-2">
                                          <button onclick="openChat('${data.email}', '${data.name}')" class="bg-sky-500/10 text-sky-400 px-2 py-1 rounded text-[9px] font-black uppercase">Message</button>
                                          <button onclick="resetPass('${data.email}')" class="bg-yellow-500/10 text-yellow-500 px-2 py-1 rounded text-[9px] font-black uppercase">Reset</button>
                                          <button onclick="deleteStudent('${docSnap.id}')" class="bg-red-500/10 text-red-500 px-2 py-1 rounded text-[9px] font-black uppercase">Remove</button>
                                    </td>
                              </tr>`;
                        });
                        document.getElementById('total-student-count').innerText = snap.size;
                  });
            }

            window.downloadCSV = () => {
                  let csvContent = "data:text/csv;charset=utf-8,Name,Roll,Email,Phone,College\n";
                  studentRecords.forEach(s => { csvContent += `${s.name},${s.roll},${s.email},${s.phone},${s.college}\n`; });
                  window.open(encodeURI(csvContent));
            };

            window.resetPass = async (email) => { await sendPasswordResetEmail(auth, email); showNotify("Reset Link Sent!"); };
            window.deleteStudent = async (id) => { if (confirm("Remove Student?")) await deleteDoc(doc(db, "students", id)); };
            window.updateNotice = async () => {
                  const text = document.getElementById('noticeText').value;
                  const snap = await getDocs(query(collection(db, "notices")));
                  if (!snap.empty) await updateDoc(doc(db, "notices", snap.docs[0].id), { text: text, updatedAt: serverTimestamp() });
                  else await addDoc(collection(db, "notices"), { text: text, createdAt: serverTimestamp() });
                  showNotify("Notice Updated!");
            };

            function initPerformanceGraph() {
                  const ctxEl = document.getElementById('performanceChart');
                  if (!ctxEl) return;
                  new Chart(ctxEl.getContext('2d'), { type: 'line', data: { labels: ['W1', 'W2', 'W3', 'W4'], datasets: [{ label: 'Average', data: [65, 80, 70, 90], borderColor: '#0ea5e9', fill: true, backgroundColor: 'rgba(14, 165, 233, 0.1)' }] } });
            }

            function loadMessages() {
                  onSnapshot(query(collection(db, "messages"), orderBy("timestamp", "desc")), (snap) => {
                        const container = document.getElementById('message-inbox-list');
                        container.innerHTML = "";
                        let emails = new Set();
                        snap.forEach(d => {
                              const m = d.data();
                              const email = m.studentEmail || m.recipientEmail;
                              if (!emails.has(email)) {
                                    emails.add(email);
                                    container.innerHTML += `<div onclick="openChat('${email}', '${m.studentName || 'Student'}')" class="p-4 border-b border-white/5 hover:bg-white/5 cursor-pointer"><p class="text-sky-400 font-bold text-sm">${m.studentName || email}</p><p class="text-[10px] text-gray-500 truncate">${m.text}</p></div>`;
                              }
                        });
                  });
            }

      </script>

      <style>
            @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap');

            body {
                  background-color: #020617;
                  color: white;
                  font-family: 'Rajdhani', sans-serif;
                  overflow: hidden;
                  margin: 0;
            }

            .glass {
                  background: rgba(15, 23, 42, 0.7);
                  backdrop-filter: blur(25px);
                  border: 1px solid rgba(255, 255, 255, 0.05);
            }

            .sidebar-item {
                  transition: 0.3s;
                  cursor: pointer;
                  border-left: 4px solid transparent;
            }

            .sidebar-item:hover,
            .sidebar-item.active {
                  background: rgba(14, 165, 233, 0.1);
                  border-left: 4px solid #0ea5e9;
                  color: #0ea5e9;
            }

            ::-webkit-scrollbar {
                  width: 4px;
            }

            ::-webkit-scrollbar-thumb {
                  background: #1e293b;
                  border-radius: 10px;
            }

            .input-smart {
                  background: rgba(15, 23, 42, 0.5);
                  border: 1px solid rgba(255, 255, 255, 0.05);
                  outline: none;
            }
      </style>
</head>

<body>
      <div id="ui-toast" class="hidden">
            <p id="ui-toast-msg" class="font-bold tracking-widest uppercase text-xs"></p>
      </div>

      <div id="login-section" class="min-h-screen flex items-center justify-center p-6 bg-[#020617]">
            <div class="glass p-10 rounded-[3rem] w-full max-w-md shadow-2xl">
                  <h2
                        class="text-3xl font-black text-sky-400 mb-8 text-center uppercase tracking-tighter tracking-widest text-shadow-lg">
                        Secure Hub</h2>
                  <input id="email" type="email" placeholder="ADMIN_EMAIL"
                        class="w-full input-smart p-4 rounded-2xl mb-4 text-white">
                  <input id="pass" type="password" placeholder="KEY_PHRASE"
                        class="w-full input-smart p-4 rounded-2xl mb-8 text-white">
                  <button onclick="loginAdmin()"
                        class="w-full bg-sky-600 py-4 rounded-2xl font-black uppercase shadow-xl hover:bg-sky-500 transition-all">Authenticate</button>
            </div>
      </div>

      <div id="admin-dashboard" class="hidden flex h-screen overflow-hidden">
            <aside class="w-72 glass border-r border-white/10 flex flex-col p-8 space-y-8">
                  <div class="text-center"><a href="index.html"
                              class="text-2xl font-black text-sky-400 uppercase tracking-tighter">Teacher hub</a></div>
                  <nav class="flex-1 space-y-2">
                        <div onclick="showSection('home-panel')" class="sidebar-item p-4 rounded-xl">üè† Students</div>
                        <div onclick="showSection('student-reg-panel')" class="sidebar-item p-4 rounded-xl">üë§
                              Enrollment</div>
                        <div onclick="showSection('resource-panel')" class="sidebar-item p-4 rounded-xl">üìÇ Resources
                        </div>
                        <div onclick="showSection('notice-panel')" class="sidebar-item p-4 rounded-xl">üì¢ Broadcast
                        </div>
                        <div onclick="showSection('inquiry-panel')" class="sidebar-item p-4 rounded-xl">üì• Messenger
                        </div>
                  </nav>
                  <button onclick="logout()"
                        class="bg-red-600/20 text-red-500 py-3 rounded-xl font-black text-[10px] uppercase border border-red-500/20">Exit
                        Hub</button>
            </aside>

            <main class="flex-1 overflow-y-auto p-10 bg-[#020617]">

                  <div id="home-panel" class="space-y-8 animate__animated animate__fadeIn">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 text-center">
                              <div class="lg:col-span-2 glass p-8 rounded-[3rem]"><canvas id="performanceChart"
                                          height="120"></canvas></div>
                              <div class="glass p-8 rounded-[3rem] flex flex-col items-center justify-center">
                                    <p class="text-[10px] uppercase font-bold text-gray-500 tracking-widest">Active
                                          Students</p>
                                    <h4 class="text-7xl font-black text-white" id="total-student-count">0</h4>
                              </div>
                        </div>
                        <div class="glass rounded-[3rem] overflow-hidden">
                              <div class="p-6 border-b border-white/10 flex justify-between items-center bg-white/5">
                                    <h3 class="text-xl font-black text-white uppercase tracking-tighter">Student
                                          Database</h3>
                                    <button onclick="downloadCSV()"
                                          class="bg-emerald-600/20 text-emerald-400 border border-emerald-500/30 px-4 py-2 rounded-xl text-[10px] font-black uppercase">CSV
                                          EXPORT üì•</button>
                              </div>
                              <div class="overflow-x-auto">
                                    <table class="w-full text-left">
                                          <thead
                                                class="bg-white/5 text-[10px] uppercase text-gray-500 tracking-widest font-black">
                                                <tr>
                                                      <th class="p-4">Name (View)</th>
                                                      <th class="p-4">Roll</th>
                                                      <th class="p-4">Email</th>
                                                      <th class="p-4">College</th>
                                                      <th class="p-4">Actions</th>
                                                </tr>
                                          </thead>
                                          <tbody id="student-table-body"></tbody>
                                    </table>
                              </div>
                        </div>
                  </div>

                  <div id="profile-panel" class="hidden max-w-2xl mx-auto animate__animated animate__fadeIn">
                        <div class="glass p-12 rounded-[4rem] border-t-8 border-sky-500">
                              <button onclick="showSection('home-panel')" class="text-sky-400 font-bold mb-6">‚Üê Back to
                                    List</button>
                              <h2 id="p-name" class="text-4xl font-black uppercase text-white mb-2">...</h2>
                              <p id="p-roll" class="text-sky-500 font-mono tracking-widest text-lg mb-8 uppercase">ID:
                                    #000</p>
                              <div class="grid grid-cols-2 gap-8 border-t border-white/5 pt-8">
                                    <div class="space-y-4">
                                          <p class="text-xs text-gray-500 uppercase font-bold">College: <span
                                                      id="p-college"
                                                      class="text-white block mt-1 text-sm font-bold italic">...</span>
                                          </p>
                                          <p class="text-xs text-gray-500 uppercase font-bold">Phone: <span id="p-phone"
                                                      class="text-white block mt-1 text-sm font-bold">...</span></p>
                                    </div>
                                    <div class="space-y-4">
                                          <p class="text-xs text-gray-500 uppercase font-bold">Email: <span id="p-email"
                                                      class="text-white block mt-1 text-sm font-bold">...</span></p>
                                          <p class="text-xs text-gray-500 uppercase font-bold">Academic Performance:
                                                <span
                                                      class="text-emerald-400 block mt-1 text-sm font-bold uppercase tracking-widest">Excellent</span>
                                          </p>
                                    </div>
                              </div>
                        </div>
                  </div>

                  <div id="resource-panel" class="hidden max-w-4xl mx-auto space-y-8">
                        <div class="glass p-10 rounded-[3rem]">
                              <h3
                                    class="text-xl font-black text-white uppercase mb-8 tracking-tighter border-b border-white/5 pb-4 italic">
                                    Resource Uplink</h3>
                              <div class="grid grid-cols-2 gap-4">
                                    <select id="resChapter" class="input-smart p-4 rounded-xl text-sky-400 font-black">
                                          <option value="1">Chapter 1</option>
                                          <option value="2">Chapter 2</option>
                                          <option value="3.1">Chapter 3.1</option>
                                          <option value="3.2">Chapter 3.2</option>
                                          <option value="4">Chapter 4</option>
                                          <option value="5">Chapter 5</option>
                                          <option value="6">Chapter 6</option>
                                          <option value="books-section">üìö Reference Books</option>
                                          <option value="model-qa">Model Q&A</option>
                                    </select>
                                    <select id="resType" class="input-smart p-4 rounded-xl text-white">
                                          <option value="PDF">üìÑ PDF / Book</option>
                                          <option value="VIDEO">üìΩÔ∏è Video Link</option>
                                    </select>
                                    <input id="resTitle" type="text" placeholder="Document Title"
                                          class="md:col-span-2 input-smart p-4 rounded-xl text-white">
                                    <input id="resLink" type="text" placeholder="Source URL (Drive/YouTube)"
                                          class="md:col-span-2 input-smart p-4 rounded-xl text-white">
                                    <button onclick="uploadResource()"
                                          class="md:col-span-2 bg-sky-600 py-4 rounded-2xl font-black uppercase hover:bg-sky-500">Deploy
                                          Resource ‚¨ÜÔ∏è</button>
                              </div>
                        </div>

                        <div class="glass p-8 rounded-[3.5rem] border-l-[15px] border-sky-500">
                              <h3 class="text-lg font-black text-white uppercase mb-8 tracking-widest italic">üìñ
                                    Teacher's Library Index (Class Mode)</h3>
                              <div id="teacher-library-view" class="space-y-6">
                              </div>
                        </div>

                        <div class="glass rounded-[3rem] overflow-hidden shadow-2xl">
                              <div class="p-6 border-b border-white/10 bg-white/5 flex justify-between gap-4">
                                    <h3 class="text-sm font-black text-white uppercase">Database Manager</h3>
                                    <input id="resSearch" onkeyup="filterResources()" type="text"
                                          placeholder="Search Chapter or Title..."
                                          class="bg-black/40 border border-white/10 p-2 rounded-xl text-xs outline-none w-64 text-white">
                              </div>
                              <table class="w-full text-left">
                                    <thead class="bg-white/5 text-[10px] uppercase text-gray-500 font-black">
                                          <tr>
                                                <th class="p-3">Section (Target Location)</th>
                                                <th class="p-3">File Title</th>
                                                <th class="p-3">Type</th>
                                                <th class="p-3 text-center">Action</th>
                                          </tr>
                                    </thead>
                                    <tbody id="resource-list-body"></tbody>
                              </table>
                        </div>
                  </div>

                  <div id="notice-panel" class="hidden max-w-3xl mx-auto space-y-8 animate__animated animate__fadeIn">
                        <div class="glass p-10 rounded-[3rem] border-l-[15px] border-emerald-500">
                              <h3 class="text-sm font-black text-emerald-500 uppercase mb-4 tracking-widest">Satellite
                                    Link (Live)</h3>
                              <input id="liveLink" type="text" placeholder="Meeting URL"
                                    class="w-full input-smart p-5 rounded-2xl text-white mb-6">
                              <div class="flex gap-4">
                                    <button onclick="updateLiveLink()"
                                          class="flex-1 bg-emerald-600 py-4 rounded-2xl font-black uppercase hover:bg-emerald-500 transition-all">Start
                                          Broadcast</button>
                                    <button onclick="endLiveSession()"
                                          class="flex-1 bg-red-600/20 text-red-500 border border-red-500/20 py-4 rounded-2xl font-black uppercase hover:bg-red-600 hover:text-white transition-all">End
                                          Session</button>
                              </div>
                        </div>
                        <div class="glass p-10 rounded-[3rem] border-b-[15px] border-yellow-500">
                              <h3 class="text-xl font-black text-yellow-500 uppercase mb-6 tracking-widest">Broadcast
                                    Notice</h3><textarea id="noticeText" placeholder="Write update..."
                                    class="w-full input-smart p-6 rounded-2xl text-white text-lg min-h-[150px] mb-6 italic leading-relaxed"></textarea><button
                                    onclick="updateNotice()"
                                    class="w-full bg-yellow-600 py-4 rounded-2xl font-black uppercase shadow-xl hover:bg-yellow-500">Push
                                    Notice üì°</button>
                        </div>
                  </div>

                  <div id="inquiry-panel" class="hidden h-[80vh] flex gap-6">
                        <div class="w-1/3 glass rounded-[2.5rem] overflow-hidden flex flex-col border border-white/5">
                              <div
                                    class="p-6 bg-white/5 border-b border-white/5 font-black uppercase text-xs tracking-widest text-sky-400 italic">
                                    Conversations</div>
                              <div id="message-inbox-list" class="flex-1 overflow-y-auto"></div>
                        </div>
                        <div class="flex-1 glass rounded-[2.5rem] flex flex-col border border-white/5 overflow-hidden">
                              <div class="p-6 border-b border-white/5 bg-white/5 font-black uppercase text-sm tracking-tighter text-white"
                                    id="chat-target-name">Select Contact</div>
                              <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-4 bg-black/20"></div>
                              <div class="p-4 border-t border-white/10 flex gap-4 bg-black/10">
                                    <input id="admin-msg-input" type="text" placeholder="Transmit message..."
                                          class="flex-1 input-smart p-4 rounded-2xl text-white">
                                    <button onclick="sendAdminMessage()"
                                          class="bg-sky-600 px-8 rounded-2xl font-black uppercase text-xs">Send</button>
                              </div>
                        </div>
                  </div>

                  <div id="student-reg-panel" class="hidden max-w-3xl mx-auto">
                        <div class="glass p-10 rounded-[3rem]">
                              <h3
                                    class="text-xl font-black text-white uppercase mb-8 border-b border-white/5 pb-4 italic">
                                    Enrollment Protocol</h3>
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-5"><input id="sName" type="text"
                                          placeholder="Full Name *"
                                          class="w-full input-smart p-4 rounded-xl text-white"><input id="sRoll"
                                          type="text" placeholder="Roll / ID *"
                                          class="w-full input-smart p-4 rounded-xl text-white"><input id="sPhone"
                                          type="text" placeholder="Phone Number"
                                          class="w-full input-smart p-4 rounded-xl text-white"><input id="sCollege"
                                          type="text" placeholder="College Name"
                                          class="w-full input-smart p-4 rounded-xl text-white"><input id="sEmail"
                                          type="email" placeholder="Email Address *"
                                          class="md:col-span-2 w-full input-smart p-4 rounded-xl text-white"><input
                                          id="sPass" type="password" placeholder="Passcode *"
                                          class="md:col-span-2 w-full input-smart p-4 rounded-xl text-white"></div>
                              <button onclick="registerStudentAuth()"
                                    class="w-full bg-emerald-600 mt-8 py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-emerald-500">Submit
                                    Deployment üöÄ</button>
                        </div>
                  </div>

            </main>
      </div>
</body>

</html>